<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="VuePress"><meta name="apple-mobile-web-app-title" content="VuePress"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>從 v1 遷移 | VuePress</title><meta name="description" content="Vue 驅動的靜態網站生成器">
    <link rel="modulepreload" href="/vue-press/assets/app.f15ed2f5.js"><link rel="modulepreload" href="/vue-press/assets/migration.html.e49e5712.js"><link rel="modulepreload" href="/vue-press/assets/migration.html.7410392e.js"><link rel="prefetch" href="/vue-press/assets/index.html.a6f83800.js"><link rel="prefetch" href="/vue-press/assets/assets.html.49c75491.js"><link rel="prefetch" href="/vue-press/assets/bundler.html.3b63afd0.js"><link rel="prefetch" href="/vue-press/assets/configuration.html.46970ab9.js"><link rel="prefetch" href="/vue-press/assets/deployment.html.82367b84.js"><link rel="prefetch" href="/vue-press/assets/getting-started.html.3bf3c9c5.js"><link rel="prefetch" href="/vue-press/assets/i18n.html.aefc4231.js"><link rel="prefetch" href="/vue-press/assets/index.html.329068b8.js"><link rel="prefetch" href="/vue-press/assets/markdown.html.b9df09ee.js"><link rel="prefetch" href="/vue-press/assets/page.html.661b93a1.js"><link rel="prefetch" href="/vue-press/assets/plugin.html.65a5dc3c.js"><link rel="prefetch" href="/vue-press/assets/theme.html.dd4307eb.js"><link rel="prefetch" href="/vue-press/assets/404.html.6b32814d.js"><link rel="prefetch" href="/vue-press/assets/index.html.46d51595.js"><link rel="prefetch" href="/vue-press/assets/assets.html.c90bc5c3.js"><link rel="prefetch" href="/vue-press/assets/bundler.html.ccddce7b.js"><link rel="prefetch" href="/vue-press/assets/configuration.html.34cda3b5.js"><link rel="prefetch" href="/vue-press/assets/deployment.html.1b2c04c9.js"><link rel="prefetch" href="/vue-press/assets/getting-started.html.af6d2c92.js"><link rel="prefetch" href="/vue-press/assets/i18n.html.8ff45e93.js"><link rel="prefetch" href="/vue-press/assets/index.html.b748dcc9.js"><link rel="prefetch" href="/vue-press/assets/markdown.html.7be9060c.js"><link rel="prefetch" href="/vue-press/assets/page.html.74867d31.js"><link rel="prefetch" href="/vue-press/assets/plugin.html.8feffe9a.js"><link rel="prefetch" href="/vue-press/assets/theme.html.c507af55.js"><link rel="prefetch" href="/vue-press/assets/404.html.8fa1376a.js"><link rel="prefetch" href="/vue-press/assets/404.c8f0b589.js"><link rel="prefetch" href="/vue-press/assets/Layout.aba3ffb4.js">
    <link rel="stylesheet" href="/vue-press/assets/style.2074c945.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vue-press/" class=""><img class="logo" src="/vue-press/images/hero.png" alt="VuePress"><span class="site-name can-hide">VuePress</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vue-press/guide/" class="router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vue-press/guide/" class="router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">指南 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/guide/" class="router-link-active sidebar-item" aria-label="介紹"><!--[--><!--]--> 介紹 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/getting-started.html" class="sidebar-item" aria-label="快速上手"><!--[--><!--]--> 快速上手 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/configuration.html" class="sidebar-item" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/page.html" class="sidebar-item" aria-label="頁面"><!--[--><!--]--> 頁面 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/markdown.html" class="sidebar-item" aria-label="Markdown"><!--[--><!--]--> Markdown <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/assets.html" class="sidebar-item" aria-label="静態資源"><!--[--><!--]--> 静態資源 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/i18n.html" class="sidebar-item" aria-label="多語言支持"><!--[--><!--]--> 多語言支持 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/deployment.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/theme.html" class="sidebar-item" aria-label="主題"><!--[--><!--]--> 主題 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/plugin.html" class="sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/guide/bundler.html" class="sidebar-item" aria-label="打包工具"><!--[--><!--]--> 打包工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="從 v1 遷移"><!--[--><!--]--> 從 v1 遷移 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/guide/migration.html#給用戶" class="router-link-active router-link-exact-active sidebar-item" aria-label="給用戶"><!--[--><!--]--> 給用戶 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/guide/migration.html#用戶配置變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="用戶配置變更"><!--[--><!--]--> 用戶配置變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#frontmatter-變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="Frontmatter 變更"><!--[--><!--]--> Frontmatter 變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#永久鏈接-patterns-變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="永久鏈接 Patterns 變更"><!--[--><!--]--> 永久鏈接 Patterns 變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#調色板系統變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="調色板系統變更"><!--[--><!--]--> 調色板系統變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#約定文件變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="約定文件變更"><!--[--><!--]--> 約定文件變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#markdown-插槽變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="Markdown 插槽變更"><!--[--><!--]--> Markdown 插槽變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#cli-變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="CLI 變更"><!--[--><!--]--> CLI 變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#默認主題變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="默認主題變更"><!--[--><!--]--> 默認主題變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#官方插件變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="官方插件變更"><!--[--><!--]--> 官方插件變更 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/guide/migration.html#社區主題和插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="社區主題和插件"><!--[--><!--]--> 社區主題和插件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/vue-press/guide/migration.html#給插件作者" class="router-link-active router-link-exact-active sidebar-item" aria-label="給插件作者"><!--[--><!--]--> 給插件作者 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/guide/migration.html#插件-api-變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="插件 API 變更"><!--[--><!--]--> 插件 API 變更 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/vue-press/guide/migration.html#給主題作者" class="router-link-active router-link-exact-active sidebar-item" aria-label="給主題作者"><!--[--><!--]--> 給主題作者 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/guide/migration.html#主題-api-變更" class="router-link-active router-link-exact-active sidebar-item" aria-label="主題 API 變更"><!--[--><!--]--> 主題 API 變更 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="從-v1-遷移" tabindex="-1"><a class="header-anchor" href="#從-v1-遷移" aria-hidden="true">#</a> 從 v1 遷移</h1><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>VuePress v1 的插件和主題與 VuePress v2 不兼容。你需要將它們升級到與 v2 對應的版本。</p></div><p>VuePress v2 的一些主要改動和優化：</p><ul><li>VuePress v2 現在使用 Vue 3 ，因此你要保證你的組件和其他客戶端文件是適用於 Vue 3 的。</li><li>VuePress v2 是使用 TypeScript 開發的，因此它現在提供了更好的類型支持。我們強烈推薦你使用 TypeScript 來開發插件和主題。 VuePress 配置文件也同樣支持 TypeScript ，你可以直接使用 <code>.vuepress/config.ts</code> 。</li><li>VuePress v2 支持使用 Webpack 和 Vite 作為打包工具。現在默認的打包工具是 Vite ，但你仍然可以選擇使用 Webpack 。你甚至可以在開發模式使用 Vite 來獲取更好的開發體驗，而在構建模式使用 Webpack 來獲取更好的瀏覽器兼容性。</li></ul><p>VuePress v2 的核心思想和流程是和 v1 一致的，但 v2 API 經過了重新設計，更加標準化。因此在將現有的 v1 項目遷移至 v2 時，你很可能會遇到一些 Breaking Changes 。本指南將幫助你將 v1 的站點 / 插件 / 主題遷移至 v2 。</p><ul><li>如果你是一個普通用戶，你需要閱讀 <a href="#%E7%B5%A6%E7%94%A8%E6%88%B6">給用戶</a> 的指南。</li><li>如果你是一個插件作者，你需要閱讀 <a href="#%E7%B5%A6%E6%8F%92%E4%BB%B6%E4%BD%9C%E8%80%85">給插件作者</a> 的指南。</li><li>如果你是一個主題作者，你需要閱讀 <a href="#%E7%B5%A6%E4%B8%BB%E9%A1%8C%E4%BD%9C%E8%80%85">給主題作者</a> 的指南。</li></ul><h2 id="給用戶" tabindex="-1"><a class="header-anchor" href="#給用戶" aria-hidden="true">#</a> 給用戶</h2><h3 id="用戶配置變更" tabindex="-1"><a class="header-anchor" href="#用戶配置變更" aria-hidden="true">#</a> 用戶配置變更</h3><h4 id="theme" tabindex="-1"><a class="header-anchor" href="#theme" aria-hidden="true">#</a> theme</h4><p>不再支持通過字符串使用主題。需要直接引入主題。</p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> module.exports = {
</span><span class="token prefix deleted">-</span><span class="token line">   theme: &#39;@vuepress/theme-default&#39;,
</span><span class="token prefix deleted">-</span><span class="token line">   themeConfig: {
</span><span class="token prefix deleted">-</span><span class="token line">     // 默認主題配置
</span><span class="token prefix deleted">-</span><span class="token line">   },
</span><span class="token prefix deleted">-</span><span class="token line"> }
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const { defaultTheme } = require(&#39;@vuepress/theme-default&#39;)
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = {
</span><span class="token prefix inserted">+</span><span class="token line">   theme: defaultTheme({
</span><span class="token prefix inserted">+</span><span class="token line">     // 默認主題配置
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="themeconfig" tabindex="-1"><a class="header-anchor" href="#themeconfig" aria-hidden="true">#</a> themeConfig</h4><p>移除。直接向主題傳入配置。</p><h4 id="plugins" tabindex="-1"><a class="header-anchor" href="#plugins" aria-hidden="true">#</a> plugins</h4><p>不再支持通過字符串使用插件。需要直接引入插件。</p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> module.exports = {
</span><span class="token prefix deleted">-</span><span class="token line">   plugins: [
</span><span class="token prefix deleted">-</span><span class="token line">     [
</span><span class="token prefix deleted">-</span><span class="token line">       &#39;@vuepress/plugin-google-analytics&#39;,
</span><span class="token prefix deleted">-</span><span class="token line">       {
</span><span class="token prefix deleted">-</span><span class="token line">         id: &#39;G-XXXXXXXXXX&#39;,
</span><span class="token prefix deleted">-</span><span class="token line">       },
</span><span class="token prefix deleted">-</span><span class="token line">     ],
</span><span class="token prefix deleted">-</span><span class="token line">   ],
</span><span class="token prefix deleted">-</span><span class="token line"> }
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const { googleAnalyticsPlugin } = require(&#39;@vuepress/plugin-google-analytics&#39;)
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = {
</span><span class="token prefix inserted">+</span><span class="token line">   plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">     googleAnalyticsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">         id: &#39;G-XXXXXXXXXX&#39;,
</span><span class="token prefix inserted">+</span><span class="token line">     }),
</span><span class="token prefix inserted">+</span><span class="token line">   ],
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="shouldprefetch" tabindex="-1"><a class="header-anchor" href="#shouldprefetch" aria-hidden="true">#</a> shouldPrefetch</h4><p>默認值從 <code>() =&gt; true</code> 更改為 <code>true</code> 。</p><h4 id="extrawatchfiles" tabindex="-1"><a class="header-anchor" href="#extrawatchfiles" aria-hidden="true">#</a> extraWatchFiles</h4><p>移除。</p><p>你可以手動在 <a href="/vue-press/reference/plugin-api.html#onwatched" class="">onWatched</a> Hook 中監聽文件變化。</p><h4 id="patterns" tabindex="-1"><a class="header-anchor" href="#patterns" aria-hidden="true">#</a> patterns</h4><p>重命名為 <code>pagePatterns</code> 。</p><h4 id="markdown-linenumbers" tabindex="-1"><a class="header-anchor" href="#markdown-linenumbers" aria-hidden="true">#</a> markdown.lineNumbers</h4><p>移動至 <a href="/vue-press/reference/config.html#markdown-code-linenumbers" class="">markdown.code.lineNumbers</a> 。</p><p>默認值從 <code>false</code> 更改為 <code>true</code> 。</p><h4 id="markdown-pagesuffix" tabindex="-1"><a class="header-anchor" href="#markdown-pagesuffix" aria-hidden="true">#</a> markdown.pageSuffix</h4><p>移除。</p><h4 id="markdown-externallinks" tabindex="-1"><a class="header-anchor" href="#markdown-externallinks" aria-hidden="true">#</a> markdown.externalLinks</h4><p>移動至 <a href="/vue-press/reference/config.html#markdown-links" class="">markdown.links.externalAttrs</a> 。</p><h4 id="markdown-toc" tabindex="-1"><a class="header-anchor" href="#markdown-toc" aria-hidden="true">#</a> markdown.toc</h4><p>有改動。</p><p>參考 <a href="/vue-press/reference/config.html#markdown-toc" class="">配置 &gt; markdown.toc</a></p><h4 id="markdown-plugins" tabindex="-1"><a class="header-anchor" href="#markdown-plugins" aria-hidden="true">#</a> markdown.plugins</h4><p>移除。</p><p>在 <a href="/vue-press/reference/plugin-api.html#extendsmarkdown" class="">extendsMarkdown</a> Hook 中使用 markdown-it 插件。</p><h4 id="markdown-extendmarkdown" tabindex="-1"><a class="header-anchor" href="#markdown-extendmarkdown" aria-hidden="true">#</a> markdown.extendMarkdown</h4><p>移除。</p><p>使用 <a href="/vue-press/reference/plugin-api.html#extendsmarkdown" class="">extendsMarkdown</a> Hook 。</p><h4 id="markdown-extractheaders" tabindex="-1"><a class="header-anchor" href="#markdown-extractheaders" aria-hidden="true">#</a> markdown.extractHeaders</h4><p>有修改。</p><p>參考 <a href="/vue-press/reference/config.html#markdown-extractheaders" class="">配置 &gt; markdown.extractHeaders</a></p><h4 id="webpack-相關配置" tabindex="-1"><a class="header-anchor" href="#webpack-相關配置" aria-hidden="true">#</a> Webpack 相關配置</h4><p>所有 Webpack 相關的配置都移動至 <code>@vuepress/bundler-webpack</code> 的配置項中，包括：</p><ul><li><code>postcss</code></li><li><code>stylus</code></li><li><code>scss</code></li><li><code>sass</code></li><li><code>less</code></li><li><code>chainWebpack</code></li><li><code>configureWebpack</code></li><li><code>evergreen</code>：默認值從 <code>false</code> 更改為 <code>true</code></li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> module.exports = {
</span><span class="token prefix deleted">-</span><span class="token line">   sass: { /* ... */ },
</span><span class="token prefix deleted">-</span><span class="token line"> }
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const { webpackBundler } = require(&#39;@vuepress/bundler-webpack&#39;)
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = {
</span><span class="token prefix inserted">+</span><span class="token line">   bundler: webpackBundler({
</span><span class="token prefix inserted">+</span><span class="token line">     sass: { /* ... */ },
</span><span class="token prefix inserted">+</span><span class="token line">   }),
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>請參考 <a href="/vue-press/guide/bundler.html" class="">Guide &gt; Bundler</a> 。</p><h3 id="frontmatter-變更" tabindex="-1"><a class="header-anchor" href="#frontmatter-變更" aria-hidden="true">#</a> Frontmatter 變更</h3><h4 id="meta" tabindex="-1"><a class="header-anchor" href="#meta" aria-hidden="true">#</a> meta</h4><p>移除。</p><p>改為使用 <a href="/vue-press/reference/frontmatter.html#head" class="">head</a> 。例如：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">head</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">-</span> meta
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> foo
      <span class="token key atrule">content</span><span class="token punctuation">:</span> bar
  <span class="token punctuation">-</span> <span class="token punctuation">-</span> link
    <span class="token punctuation">-</span> <span class="token key atrule">rel</span><span class="token punctuation">:</span> canonical
      <span class="token key atrule">href</span><span class="token punctuation">:</span> foobar
  <span class="token punctuation">-</span> <span class="token punctuation">-</span> script
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">-</span> console.log(&#39;hello from frontmatter&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>和以下結構相同：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;meta&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;canonical&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;foobar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;script&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">console.log(&#39;hello from frontmatter&#39;);</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="永久鏈接-patterns-變更" tabindex="-1"><a class="header-anchor" href="#永久鏈接-patterns-變更" aria-hidden="true">#</a> 永久鏈接 Patterns 變更</h3><ul><li><code>:i_month</code>：移除</li><li><code>:i_day</code>：移除</li><li><code>:minutes</code>：移除（v1 文檔中未列出）</li><li><code>:seconds</code>：移除（v1 文檔中未列出）</li><li><code>:regular</code>：重命名為 <code>:raw</code></li></ul><p>參考 <a href="/vue-press/reference/frontmatter.html#permalinkpattern" class="">Frontmatter &gt; permalinkPattern</a> 。</p><h3 id="調色板系統變更" tabindex="-1"><a class="header-anchor" href="#調色板系統變更" aria-hidden="true">#</a> 調色板系統變更</h3><p>VuePress v1 的 Stylus 調色板系統 （即 <code>styles/palette.styl</code> 和 <code>styles/index.styl</code>） 不再由 VuePress Core 默認提供支持。</p><p>調色板系統提取到了 <a href="/vue-press/reference/plugin/palette.html" class="">@vuepress/plugin-palette</a> 當中。</p><p>主題作者可以使用自己的方式來為用戶提供自定義樣式的能力，而不必被限制在 Stylus 當中。</p><p>如果你使用的是默認主題，那麼調色板系統仍然存在，但改為使用 SASS ，並且大部分變量都遷移為 CSS 變量。參考 <a href="/vue-press/reference/default-theme/styles.html" class="">默認主題 &gt; 樣式</a> 。</p><h3 id="約定文件變更" tabindex="-1"><a class="header-anchor" href="#約定文件變更" aria-hidden="true">#</a> 約定文件變更</h3><h4 id="vuepress-enhanceapp-js" tabindex="-1"><a class="header-anchor" href="#vuepress-enhanceapp-js" aria-hidden="true">#</a> .vuepress/enhanceApp.js</h4><p>重命名為 <code>.vuepress/client.{js,ts}</code> ，使用方法也有改動。</p><p>參考 <a href="/vue-press/advanced/cookbook/usage-of-client-config.html" class="">深入 &gt; Cookbook &gt; 客戶端配置的使用方法</a> 。</p><h4 id="vuepress-components" tabindex="-1"><a class="header-anchor" href="#vuepress-components" aria-hidden="true">#</a> .vuepress/components/</h4><p>在該目錄下的文件不會被自動註冊為 Vue 組件。</p><p>你需要使用 <a href="/vue-press/reference/plugin/register-components.html" class="">@vuepress/plugin-register-components</a> ，或者在 <code>.vuepress/client.{js,ts}</code> 中手動註冊你的組件。</p><h4 id="vuepress-theme" tabindex="-1"><a class="header-anchor" href="#vuepress-theme" aria-hidden="true">#</a> .vuepress/theme/</h4><p>即使該目錄存在，也不會被隱式默認當作本地主題目錄。</p><p>你需要在 <a href="/vue-press/reference/config.html#theme" class="">theme</a> 配置項中顯式引入並使用本地主題。</p><h3 id="markdown-插槽變更" tabindex="-1"><a class="header-anchor" href="#markdown-插槽變更" aria-hidden="true">#</a> Markdown 插槽變更</h3><p>Markdown 插槽不再被支持。</p><h3 id="cli-變更" tabindex="-1"><a class="header-anchor" href="#cli-變更" aria-hidden="true">#</a> CLI 變更</h3><h4 id="eject-命令" tabindex="-1"><a class="header-anchor" href="#eject-命令" aria-hidden="true">#</a> eject 命令</h4><p>移除。</p><h4 id="cache-選項" tabindex="-1"><a class="header-anchor" href="#cache-選項" aria-hidden="true">#</a> cache 選項</h4><ul><li><code>-c, --cache [cache]</code>：修改為 <code>--cache &lt;cache&gt;</code> ，意味著 <code>-c</code> 不再是 <code>cache</code> 選項的縮寫，並且 <code>cache</code> 選項的值不再是可選的。</li><li><code>--no-cache</code>：重命名為 <code>--clean-cache</code> 。</li></ul><h3 id="默認主題變更" tabindex="-1"><a class="header-anchor" href="#默認主題變更" aria-hidden="true">#</a> 默認主題變更</h3><h4 id="內置組件" tabindex="-1"><a class="header-anchor" href="#內置組件" aria-hidden="true">#</a> 內置組件</h4><ul><li><code>&lt;CodeGroup /&gt;</code> 和 <code>&lt;CodeBlock /&gt;</code> 重命名為 <code>&lt;CodeGroup /&gt;</code> 和 <code>&lt;CodeGroupItem /&gt;</code></li><li><code>&lt;Badge /&gt;</code><ul><li><code>$badgeErrorColor</code> 調色板變量重命名為 <code>$badgeDangerColor</code></li><li><code>type</code> Prop 現在只接受 <code>tip</code> 、 <code>warning</code> 和 <code>danger</code></li></ul></li></ul><h4 id="調色板系統" tabindex="-1"><a class="header-anchor" href="#調色板系統" aria-hidden="true">#</a> 調色板系統</h4><p>默認主題的調色板系統遷移為 SASS 和 CSS 變量。</p><p>參考 <a href="/vue-press/reference/default-theme/styles.html" class="">默認主題 &gt; 樣式</a> 。</p><h4 id="主題配置" tabindex="-1"><a class="header-anchor" href="#主題配置" aria-hidden="true">#</a> 主題配置</h4><p>默認主題的配置有大量變更。</p><p>參考 <a href="/vue-press/reference/default-theme/config.html" class="">默認主題 &gt; 配置</a> 。</p><h3 id="官方插件變更" tabindex="-1"><a class="header-anchor" href="#官方插件變更" aria-hidden="true">#</a> 官方插件變更</h3><p>參考 <a href="/vue-press/reference/plugin/" class="">官方插件</a> 。</p><h3 id="社區主題和插件" tabindex="-1"><a class="header-anchor" href="#社區主題和插件" aria-hidden="true">#</a> 社區主題和插件</h3><p>v1 的主題和插件和 v2 並不兼容。</p><p>請確保你在使用的主題和插件已經支持 v2 ，並前往它們各自的文檔查看遷移指南。</p><h2 id="給插件作者" tabindex="-1"><a class="header-anchor" href="#給插件作者" aria-hidden="true">#</a> 給插件作者</h2><p>一些主要的 Breaking Changes ：</p><ul><li>你不能再在你的插件中使用其他插件了，這避免了很多由於插件嵌套引發的問題。如果你的插件依賴於別的插件，你可以在文檔中列出他們，並讓用戶手動引入。或者，你也可以向用戶提供一個插件數組以方便使用。</li><li>大部分 v1 Hook 都在 v2 中存在等效的 Hook 或實現方式。唯一的例外是 <code>extendsCli</code> ，它被移除了。</li><li>Webpack 相關的 Hook 都被移除了，因為 VuePress Core 已經和 Webpack 解耦了。</li></ul><p>你可以參考 <a href="/vue-press/advanced/plugin.html" class="">深入 &gt; 開發插件</a> 來了解如何開發一個 v2 插件。</p><h3 id="插件-api-變更" tabindex="-1"><a class="header-anchor" href="#插件-api-變更" aria-hidden="true">#</a> 插件 API 變更</h3><ul><li><code>plugins</code>：移除</li><li><code>ready</code>：重命名為 <code>onPrepared</code></li><li><code>updated</code>：重命名為 <code>onWatched</code></li><li><code>generated</code>：重命名為 <code>onGenerated</code></li><li><code>additionalPages</code>：移除，改為在 <code>onInitialized</code> Hook 中使用 <code>app.pages.push(createPage())</code></li><li><code>clientDynamicModules</code>：移除，改為在 <code>onPrepared</code> Hook 中使用 <code>app.writeTemp()</code></li><li><code>enhanceAppFiles</code>：移除，使用 <code>clientConfigFile</code> Hook</li><li><code>globalUIComponents</code>：移除，使用 <code>clientConfigFile</code> Hook</li><li><code>clientRootMixin</code>：移除，使用 <code>clientConfigFile</code> Hook</li><li><code>extendMarkdown</code>：重命名為 <code>extendsMarkdown</code></li><li><code>chainMarkdown</code>：移除</li><li><code>extendPageData</code>：重命名為 <code>extendsPage</code></li><li><code>extendsCli</code>：移除</li><li><code>configureWebpack</code>：移除</li><li><code>chainWebpack</code>：移除</li><li><code>beforeDevServer</code>：移除</li><li><code>afterDevServer</code>：移除</li></ul><p>參考 <a href="/vue-press/reference/plugin-api.html" class="">插件 API</a> 。</p><h2 id="給主題作者" tabindex="-1"><a class="header-anchor" href="#給主題作者" aria-hidden="true">#</a> 給主題作者</h2><p>請先瀏覽 <a href="#%E6%8F%92%E4%BB%B6-api-%E8%AE%8A%E6%9B%B4">插件 API 變更</a> 和 <a href="#%E4%B8%BB%E9%A1%8C-api-%E8%AE%8A%E6%9B%B4">主題 API 變更</a>。</p><p>雖然我們不允許在插件中使用其他插件了，但是你仍然可以在你的主題中使用插件。</p><p>一些主要的 Breaking Changes ：</p><ul><li>所謂的 <strong>主題目錄結構約定</strong> 不再存在。 <ul><li><code>theme/enhanceApp.js</code> 文件不會被隱式作為 Client App Enhance 文件。你需要在 <code>clientConfigFile</code> Hook 中顯式指定它。</li><li><code>theme/global-components/</code> 目錄下的文件不會被自動註冊為 Vue 組件。你需要使用 <a href="/vue-press/reference/plugin/register-components.html" class="">@vuepress/plugin-register-components</a> ，或者在 <code>clientConfigFile</code> 中手動註冊組件。</li><li><code>theme/layouts/</code> 目錄下的文件不會被自動註冊為佈局組件。你需要通過 <code>layouts</code> 配置項來顯式指定。</li><li><code>theme/templates/</code> 目錄下的文件不會被自動用作 dev / ssr 的模板。你需要通過 <code>templateBuild</code> 和 <code>templateDev</code> 配置項來顯式指定。</li><li>你始終需要提供一個合法的 JS 入口文件，不要再使用 <code>&quot;main&quot;: &quot;layouts/Layout.vue&quot;</code> 作為主題入口。</li></ul></li><li><code>themeConfig</code> 已經從用戶配置和站點數據中移除。如果你想要像 v1 一樣通過 <code>this.$site.themeConfig</code> 來訪問 <code>themeConfig</code> ，我們現在建議使用 <a href="/vue-press/reference/plugin/theme-data.html" class="">@vuepress/plugin-theme-data</a> 插件和它提供的 Composition API <code>useThemeData</code> 。</li><li>Stylus 不再是默認的 CSS 預處理器，並且 Stylus 調色板系統不再被默認支持。如果你仍然想要使用和 v1 類似的調色板系統，可以使用 <a href="/vue-press/reference/plugin/palette.html" class="">@vuepress/plugin-palette</a> 。</li><li>由 Prism.js 提供的 Markdown 代碼塊的語法高亮不再被默認支持。你可以選擇使用 <a href="/vue-press/reference/plugin/prismjs.html" class="">@vuepress/plugin-prismjs</a> 或 <a href="/vue-press/reference/plugin/shiki.html" class="">@vuepress/plugin-shiki</a> ，或者用你自己的方式實現語法高亮。</li><li>考虑到可擴展性， <code>this.$site.pages</code> 不再可用。</li></ul><p>你可以參考 <a href="/vue-press/advanced/theme.html" class="">深入 &gt; 開發主題</a> 來了解如何開發一個 v2 主題。</p><h3 id="主題-api-變更" tabindex="-1"><a class="header-anchor" href="#主題-api-變更" aria-hidden="true">#</a> 主題 API 變更</h3><h4 id="layouts" tabindex="-1"><a class="header-anchor" href="#layouts" aria-hidden="true">#</a> layouts</h4><p>現在你需要手動設置佈局目錄或佈局組件。</p><p>參考 <a href="/vue-press/reference/theme-api.html#layouts" class="">主題 API &gt; layouts</a> 。</p><h4 id="extend" tabindex="-1"><a class="header-anchor" href="#extend" aria-hidden="true">#</a> extend</h4><p>重命名為 <code>extends</code> 。</p><p>你仍然可以通過 <code>extends: parentTheme()</code> 來繼承一個父主題，這將會繼承其插件和佈局等。</p><p>你可以參考 <a href="/vue-press/reference/default-theme/extending.html" class="">默認主題 &gt; 繼承</a> 來了解如何繼承默認主題。</p><p><code>@theme</code> 和 <code>@parent-theme</code> 別名默認被移除了，但你仍然可以使用類似的方式來開發一個可繼承的主題，參考 <a href="/vue-press/advanced/cookbook/making-a-theme-extendable.html" class="">深入 &gt; Cookbook &gt; 開發一個可繼承的主題</a> 。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: arx827@gmail.com">Eason Chen</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/vue-press/guide/bundler.html" class="" aria-label="打包工具"><!--[--><!--]--> 打包工具 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vue-press/assets/app.f15ed2f5.js" defer></script>
  </body>
</html>
